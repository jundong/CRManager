<script id="dashboard-template" type="text/html">
    <div class="container">
        <div class="l-portlet-column column" data-bind="template: {name: 'portlet-column-template', foreach: leftPortlets, templateEngine: new ko.nativeTemplateEngine}">
        </div>

        <div class="r-portlet-column column" data-bind="template: {name: 'portlet-column-template', foreach: rightPortlets, templateEngine: new ko.nativeTemplateEngine }">
        </div>

        <div class="clear"></div>
        <div id="preloadImages"></div>
    </div>
</script>

<script id="portlet-column-template" type="text/html">
    <!-- ko if: contentType() == 1 -->
    <div class="portlet box" data-bind="template: {name: 'basic-portlet-template', data: $data, templateEngine: new ko.nativeTemplateEngine, afterRender: function () { $data.dashboardVm.initializeHotPotter(); } }">
    </div>
    <!-- /ko -->
    <!-- ko if: contentType() == 4 -->
    <!-- ko if: templateId() == 'recent-news-template' -->
    <div class="portlet box" data-bind="template: {name: 'recent-news-portlet-template', data: $data, templateEngine: new ko.nativeTemplateEngine }">
    </div>
    <!-- /ko -->
    <!-- ko if: templateId() == 'enterprise-security-cases-template' -->
    <div class="portlet box" data-bind="template: {name: 'enterprise-security-cases-portlet-template', data: $data, templateEngine: new ko.nativeTemplateEngine, afterRender: function () { $data.dashboardVm.showEnterpriseTestsPaginator(); }}">
    </div>
    <!-- /ko -->
    <!-- ko if: templateId() == 'host-security-cases-template' -->
    <div class="portlet box" data-bind="template: {name: 'host-security-cases-portlet-template', data: $data, templateEngine: new ko.nativeTemplateEngine }">
    </div>
    <!-- /ko -->
    <!-- /ko -->
    <!-- ko if: contentType() == 5 -->
    <div class="portlet box" data-bind="template: {name: 'twitter-portlet-template', data: $data, templateEngine: new ko.nativeTemplateEngine, afterRender: function () { $data.dashboardVm.initializeTwitterPortlets(); }}">
    </div>
    <!-- /ko -->
</script>

<script id="basic-portlet-template" type="text/html">
    <h2 data-bind="text: name"></h2>
    <div class="portlet-content" data-bind="html: portletContent"></div>
    <div class="clear"></div>
</script>

<script id="enterprise-security-cases-portlet-template" type="text/html">
    <h2>
        <span data-bind="text: name"></span>
    </h2>
    <div class="portlet-content">
        <ul class="security-cases" data-bind="visible: dashboardVm.enterpriseTests().length > 0, foreach: dashboardVm.enterpriseTests">
            <li data-bind="click: function () { rootVm.loadTest($data) }, clickBubble: false">
                <h3 data-bind="text: name"></h3>
                <p data-bind="text: template_name"></p>
            </li>
        </ul>
        <div class="security-cases-paginator" data-bind="visible: dashboardVm.totalEnterpriseTests > dashboardVm.enterpriseTestsPerPage"></div>
    </div>
</script>

<script id="host-security-cases-portlet-template" type="text/html">
    <h2>
        <span data-bind="text: name"></span>
    </h2>
    <div class="portlet-content">
        <ul class="security-cases" data-bind="foreach: dashboardVm.hostTests">
            <!-- ko if: $index() < 10 -->
            <li data-bind="click: function () { rootVm.loadTest($data) }, clickBubble: false">
                <h3 data-bind="text: name"></h3>
                <p data-bind="text: categories()[0].name"></p>
            </li>
            <!-- /ko -->
        </ul>
    </div>
</script>

<script id="recent-news-portlet-template" type="text/html">
    <h2>
        <span data-bind="text: name"></span>
    </h2>
    <div class="portlet-content">
        <div class="recent-news" data-bind="visible: $root.testResultsHistory().length > 0">
        <table>
            <thead>
                <tr>
                    <td></td>
                    <td>{% trans %}Name{% endtrans %}</td>
                    <td>{% trans %}Date{% endtrans %}</td>
                </tr>
            </thead>
            <tbody data-bind="foreach: testResultsHistory">
                <!-- ko if: $index() < 10 -->
                <tr data-bind="click: function () { loadRecentTest(); }, clickBubble: false, attr: {class: endResult() == 'error' ? 'fail' : endResult}">
                    <td>
                        <img data-bind="visible: endResult() == 'pass', attr: {alt: endResult}" src="static/images/pass-light.png" />
                        <img data-bind="visible: endResult() == 'completed', attr: {alt: endResult}" src="static/images/unrated-light.png" />
                        <img data-bind="visible: endResult() == 'fail' || endResult() == 'error', attr: {alt: endResult}" src="static/images/fail-light.png" />
                        <img data-bind="visible: endResult() == 'aborted' || endResult() == 'incomplete', attr: {alt: endResult}" src="static/images/no-light.png" />
                    </td>
                    <td>
                        <h4 data-bind="text: name" class="name"></h4>
                        <p data-bind="text: template_name" class="category"></p>
                    </td>
                    <td data-bind="text: dateFormatted" class="date"></td>
                </tr>
                <!-- /ko -->
            </tbody>
        </table>
        </div>
    </div>
</script>

<script id="twitter-portlet-template" type="text/html">
    <h2>
        <span data-bind="text: name"></span>
    </h2>
    <div class="portlet-content tweet" data-bind="attr: {'data-twitter-username': portletContent}"></div>
</script>
